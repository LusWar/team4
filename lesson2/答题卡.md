## 第二课作业 PoE 1

课程里会给出参考资料，大家一定要自己敲一遍**代码**！

注：

1. 下面的题目，都需要提交源代码，程序运行的命令行截图，前端apps 发送对应交易的截图；
2. 可以尝试别的数据类型，功能满足即可；
3. 在可调用函数里要有合理的检查；操作成功要触发事件；
4. 附加题不是必答的，但可以酌情加分。

图0:程式码
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/1.png)
-------------
图1:编译成功画面
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/1.png)
-------------
图2:程序运行的命令行截图
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/2.png)
-------------
图3:create claim 0x01
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/3.png)
-------------
图4:create claim 0x02,操作成功触发事件
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/4.png)
-------------
图5:revoke claim 0x01,操作成功触发事件
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/5.png)
-------------
图6:transfer claim 0x02 to another account,操作成功触发事件
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/6.png)
-------------
图7:transfer 不存在的claim to another account,操作失败出现Error
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/7.png)
-------------
图8:当claim太长时,操作失败出现Error
![image](https://github.com/kuoyehs/team4-1/blob/kuoyehs/lesson2/pic/8.png)
-------------

**第一题：实现存证模块的功能，包括：**
* 创建存证，可调用函数所接收参数为内容的哈希值 Vec<u8>；
* 撤销存证，可调用函数所接收参数为内容的哈希值 Vec<u8>。

-请看图0中的create_claim，revoke_claim
-图3～图5 create claim，revoke claim


**第二题：为存证模块添加新的功能，**

* 转移存证，接收两个参数，一个是内容的哈希值，另一个是存证的接收账户地址；当存证不存在或者发送请求的用户不是存证内容的拥有人时，返回错误；当所有的检查通过后，更新对应的存证记录，并触发一个事件。

-请看图0中的transfer_claim
-图6～图7 transfer claim操作



**第三题（附加题）：**

* 创建存证时，为存证内容的哈希值设置界限，如果超出界限，返回错误。

-请看图0中的create_claim，revoke_claim，transfer_claim中均有验证ensure!(claim.len() <= 1, Error::<T>::ProofTooLong);
-当claim.len()>1时出现ProofTooLong Error
-图8 create claim操作，claim.len()>1时出现ProofTooLong Error


### 参考资料

["Proof Of Existence" dApp](https://www.substrate.io/tutorials/build-a-dapp/v2.0.0-rc2)

[Rust pattern match](https://doc.rust-lang.org/book/ch18-00-patterns.html)

[Enum](https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html)

[Recoverable Errors with Result](https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html)

[Generic Types, Traits](https://doc.rust-lang.org/book/ch10-00-generics.html)